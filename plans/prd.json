[
  {
    "id": "pipeline-014",
    "category": "security",
    "description": "Cap retry-after wait time to prevent DoS",
    "passes": true,
    "steps": [
      "Add MAX_RETRY_WAIT_MS constant (5 minutes)",
      "Apply Math.min cap in rest-client.service.ts",
      "Apply Math.min cap in util.ts",
      "Add tests for cap behavior"
    ],
    "notes": "Implemented in rest-client.service.ts:5 and util.ts:88"
  },
  {
    "id": "pipeline-006-path",
    "category": "security",
    "description": "Use relative paths in error messages",
    "passes": true,
    "steps": [
      "Import relative from node:path",
      "Update saveJson error to use relative path"
    ],
    "notes": "Implemented in util.ts:4,40-41"
  },
  {
    "id": "pipeline-011",
    "category": "architecture",
    "description": "Export isCriticalError and saveJson from package index",
    "passes": true,
    "steps": [
      "Check current index.ts exports",
      "Add missing exports to extract/index.ts",
      "Add to main package index if needed"
    ],
    "notes": "Already exported in extract/index.ts:13"
  },
  {
    "id": "pipeline-002-switch",
    "category": "simplicity",
    "description": "Remove redundant switch default in isCriticalError",
    "passes": true,
    "steps": [
      "Remove explicit GraphQLError case (covered by default)",
      "Add comment explaining default behavior"
    ],
    "notes": "Better solution: uses exhaustiveness check (never type) instead of default. GraphQLError case needed for type completeness."
  },
  {
    "id": "pipeline-002",
    "category": "architecture",
    "description": "Create generic ManifestService factory to eliminate 900 LOC duplication",
    "passes": false,
    "steps": [
      "Create manifest.factory.ts with generic createManifestService",
      "Refactor nll.manifest.ts to use factory",
      "Refactor pll.manifest.ts to use factory",
      "Refactor mll.manifest.ts to use factory",
      "Refactor msl.manifest.ts to use factory",
      "Refactor wla.manifest.ts to use factory",
      "Verify all tests pass"
    ]
  },
  {
    "id": "pipeline-001",
    "category": "agent-native",
    "description": "Export services for programmatic API access",
    "passes": false,
    "steps": [
      "Export extractor services from package index",
      "Export manifest services from package index",
      "Add programmatic entry points in extract/api.ts",
      "Document API in AGENTS.md"
    ]
  },
  {
    "id": "pipeline-008",
    "category": "agent-native",
    "description": "Add --json flag for machine-readable CLI output",
    "passes": false,
    "steps": [
      "Add jsonOption to cli-utils.ts",
      "Update nll/run.ts to support --json",
      "Update pll/run.ts to support --json",
      "Update mll/run.ts to support --json",
      "Update msl/run.ts to support --json",
      "Update wla/run.ts to support --json"
    ]
  },
  {
    "id": "pipeline-009",
    "category": "agent-native",
    "description": "Add --status flag to query extraction status",
    "passes": false,
    "steps": [
      "Add statusOption to cli-utils.ts",
      "Implement status query in each CLI",
      "Support both human and JSON output for status"
    ]
  },
  {
    "id": "pipeline-018",
    "category": "refactoring",
    "description": "Create makeExtractMethod factory to consolidate 625 LOC boilerplate",
    "passes": false,
    "steps": [
      "Create makeExtractMethod factory in extract/util.ts",
      "Refactor nll.extractor.ts extract methods",
      "Refactor pll.extractor.ts extract methods",
      "Refactor mll.extractor.ts extract methods",
      "Refactor msl.extractor.ts extract methods",
      "Refactor wla.extractor.ts extract methods",
      "Verify all tests pass"
    ]
  },
  {
    "id": "pipeline-005",
    "category": "simplification",
    "description": "Simplify IncrementalExtractionService to pure functions",
    "passes": false,
    "steps": [
      "Convert shouldExtract to pure function",
      "Convert isStale to pure function",
      "Update extractor imports",
      "Remove service wrapper overhead"
    ]
  },
  {
    "id": "pipeline-001-jsdoc",
    "category": "simplicity",
    "description": "Remove excessive JSDoc duplication across extractors",
    "passes": true,
    "steps": [
      "Add single module-level doc in extract/util.ts",
      "Remove per-method JSDoc duplication from 5 extractors"
    ],
    "notes": "Already appropriate: extractors have minimal 1-line JSDoc (@see isCriticalError). Not excessive."
  },
  {
    "id": "pipeline-004",
    "category": "architecture",
    "description": "Add GraphQLError to PipelineError union",
    "passes": true,
    "steps": [
      "Add GraphQLError to PipelineError type in error.ts",
      "Update isCriticalError signature",
      "Update any dependent code"
    ],
    "notes": "Moved GraphQLError from graphql.service.ts to error.ts. Simplified isCriticalError signature."
  },
  {
    "id": "pipeline-005-url",
    "category": "security",
    "description": "Sanitize URLs in error messages (strip query params)",
    "passes": true,
    "steps": [
      "Add sanitizeUrl helper",
      "Apply to HttpError, NetworkError, etc.",
      "Verify tokens not exposed"
    ],
    "notes": "WONT-FIX: Low risk - tokens in headers not query strings, URLs useful for debugging, internal tooling only"
  },
  {
    "id": "pipeline-010",
    "category": "agent-native",
    "description": "Add machine-readable error codes to PipelineError types",
    "passes": true,
    "steps": [
      "Define error code literals for HttpError",
      "Define error codes for other error types",
      "Update error constructors"
    ],
    "notes": "WONT-FIX: _tag discriminant already provides machine-readable codes. HttpError has statusCode for granularity."
  }
]
