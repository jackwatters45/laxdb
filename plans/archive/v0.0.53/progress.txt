Ralph Progress Log
Started: 2026-01-20T14:22:00+11:00
Previous: plans/archive/v0.0.3/

--- Session History ---

[pipeline-014] COMPLETE
Summary: Added MAX_RETRY_WAIT_MS (5 min) cap to rest-client.service.ts
Files: packages/pipeline/src/api-client/rest-client.service.ts
Gotchas: util.ts already had the cap, rest-client did not

[pipeline-006-path] COMPLETE
Summary: Use relative paths in saveJson error messages
Files: packages/pipeline/src/extract/util.ts, util.test.ts
Gotchas: Had to update test expectations to match new relative path output

[pipeline-011] COMPLETE
Summary: Already exported - verified isCriticalError, saveJson, withRateLimitRetry in extract/index.ts
Files: None (already done)
Gotchas: None

[pipeline-002-switch] COMPLETE
Summary: Already better than proposed - uses exhaustiveness check instead of default
Files: None (already done)
Gotchas: TypeScript exhaustiveness check (const _: never = error) is better than default case

[pipeline-001-jsdoc] COMPLETE
Summary: Already appropriate - extractors have minimal 1-line JSDoc
Files: None (not needed)
Gotchas: Original todo assumed excessive JSDoc that was never added

[pipeline-004] COMPLETE
Summary: Added GraphQLError to PipelineError union, simplified isCriticalError signature
Files: error.ts, graphql.service.ts, extract/util.ts
Gotchas: Re-export GraphQLError from graphql.service.ts for backwards compatibility

[pipeline-005-url] WONT-FIX
Summary: Tokens in headers not query strings, URLs useful for debugging
Files: None
Gotchas: Stripping query params would hurt debugging without real security benefit

[pipeline-010] WONT-FIX
Summary: _tag already provides machine-readable codes, statusCode for HTTP granularity
Files: None
Gotchas: Adding redundant codes adds complexity without benefit

[pipeline-005] WONT-FIX
Summary: Service pattern consistent with codebase, enables Layer-based testing
Files: None
Gotchas: Pure functions would lose testability and break Effect pattern consistency

[pipeline-001] COMPLETE
Summary: Export services for programmatic API access
Files: extract/api.ts (new), extract/index.ts, CLAUDE.md
Gotchas: PLL uses extractYear not extractSeason. Use CLAUDE.md not AGENTS.md.

[pipeline-008] COMPLETE
Summary: Add --json flag for machine-readable CLI output
Files: extract/cli-utils.ts, nll/run.ts, pll/run.ts, mll/run.ts, msl/run.ts, wla/run.ts
Gotchas: Use Logger.withMinimumLogLevel(LogLevel.None) to suppress logs in json mode

[pipeline-009] COMPLETE
Summary: Add --status flag to query extraction status
Files: extract/cli-utils.ts, nll/run.ts, pll/run.ts, mll/run.ts, msl/run.ts, wla/run.ts
Gotchas: Need Layer.mergeAll to include both ExtractorService.Default and ManifestService.Default

[pipeline-002] COMPLETE
Summary: Create generic ManifestService factory to eliminate duplication
Files: extract/manifest.factory.ts (new), nll/nll.manifest.ts, pll/pll.manifest.ts, mll/mll.manifest.ts, msl/msl.manifest.ts, wla/wla.manifest.ts
Gotchas: EntityStatus requires all fields required (not optional) for Record<string, EntityStatus> constraint. Schema param needs `any` for input type.

[pipeline-018] WONT-FIX
Summary: Extract method factory not worth the complexity
Files: None
Gotchas: Each method has different client signatures, params, entity types. Factory would add generic type complexity without proportional benefit. "Boilerplate" is actually consistent error handling behavior - good duplication.

---
Archived: 2026-01-21T14:45:00+11:00
Version: v0.0.53
Features: 14/14 passing
